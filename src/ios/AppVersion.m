#import "AppVersion.h"
#import <Cordova/CDVPluginResult.h>

@implementation AppVersion

    - (void)getVersionNumber : (CDVInvokedUrlCommand *)command
{
  NSString * callbackId = command.callbackId;
  NSString * version =[[[NSBundle mainBundle]infoDictionary]objectForKey :@"CFBundleShortVersionString"];
if (version == nil) {
  NSLog(@"CFBundleShortVersionString was nil, attempting CFBundleVersion");
version =[[[NSBundle mainBundle]infoDictionary]objectForKey :@"CFBundleVersion"];
if (version == nil) {
  NSLog(@"CFBundleVersion was also nil, giving up");
// not calling error callback here to maintain backward compatibility
}
}

CDVPluginResult * pluginResult =[CDVPluginResult resultWithStatus : CDVCommandStatus_OK messageAsString : version];
[self.commandDelegate sendPluginResult : pluginResult callbackId : callbackId];
}

- (void)getVersionCode : (CDVInvokedUrlCommand *)command
{
  NSString * callbackId = command.callbackId;
  NSString * version =[[[NSBundle mainBundle]infoDictionary]objectForKey :@"CFBundleVersion"];
CDVPluginResult * pluginResult =[CDVPluginResult resultWithStatus : CDVCommandStatus_OK messageAsString : version];
[self.commandDelegate sendPluginResult : pluginResult callbackId : callbackId];
}

- (void)getAppName : (CDVInvokedUrlCommand *)command
{
    NSString * callbackId = command.callbackId;
    NSString * version =[[[NSBundle mainBundle]infoDictionary]objectForKey :@"CFBundleDisplayName"];
    CDVPluginResult * pluginResult =[CDVPluginResult resultWithStatus : CDVCommandStatus_OK messageAsString : version];
    [self.commandDelegate sendPluginResult : pluginResult callbackId : callbackId];
}

- (void)getPackageName:(CDVInvokedUrlCommand*)command
{
    NSString* callbackId = command.callbackId;
    NSString* packageName = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleIdentifier"];
    CDVPluginResult* pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:packageName];
    [self.commandDelegate sendPluginResult:pluginResult callbackId:callbackId];
}


@end
